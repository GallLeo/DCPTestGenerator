<?xml version="1.0" encoding="UTF-8"?>
<DcpTestSuiteExtension xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:noNamespaceSchemaLocation="DCP-Testsuite-extension.xsd">


  <!-- ToDo: Check if slave checks Support -->
  <!-- ToDo Not supported Steps -->

  <!-- ToDo Check if slave support Data & Param over TCP -->

  <ForEach variableName="transition">
    <Set>
      <Test.transitions/>
    </Set>
    <If
      condition=" transition.sending != undefined &amp;&amp; transition.sending.stcRegister != undefined">
      <Update oldVariable="transition.sending.stcRegister.minorVersion"
        newVariable="slave.dcpMinorVersion"/>
      <Update oldVariable="transition.sending.stcRegister.majorVersion"
        newVariable="slave.dcpMajorVersion"/>
      <Update oldVariable="transition.sending.stcRegister.slaveUuid" newVariable="slave.uuid"/>
      <Update oldVariable="transition.sending.stcRegister.opMode" newVariable="1"/>
    </If>
  </ForEach>



  <!-- Alive -->
  <ExtensionSet state="0">
     
    <!-- Wrong state in transition-->
    <ForEach variableName="oState">
      <Set>
        <DcpStates/>
      </Set>
      <If condition="state != oState">
        <AddTransition fromOffset="0" toOffset="1">
          <Sending>
            <STC_register>
              <Receiver>
                <Value value="1"/>
              </Receiver>
              <StateId>
                <Variable variablenname="oState"/>
              </StateId>
              <SlaveUUID>
                <Random/>
              </SlaveUUID>
              <OpMode>
                <Random/>
              </OpMode>
              <MajorVersion>
                <Random/>
              </MajorVersion>
              <MinorVersion>
                <Random/>
              </MinorVersion>
            </STC_register>
          </Sending>
        </AddTransition>
        <AddTransition fromOffset="1" toOffset="2">
          <Receiving>
            <RSP_nack>
              <Sender>
                <Value value="1"/>
              </Sender>
              <ErrorCode>
                <!-- INVALID_STATE_ID -->
                <Value value="8205"/>
              </ErrorCode>
            </RSP_nack>
          </Receiving>
        </AddTransition>
        <UpdateMaxStep increase="2"/>
      </If>
    </ForEach>
    <!-- Wrong operation mode -->
    <ForEach variableName="opMode">
      <Set>
        <DcpOpModes/>
      </Set>
      <IfVariableNotInDcpSlaveDescription>
        <AddTransition fromOffset="0" toOffset="1">
          <Sending>
            <STC_register>
              <Receiver>
                <Value value="1"/>
              </Receiver>
              <StateId>
                <Value value="0"/>
              </StateId>
              <SlaveUUID>
                <Variable variablenname="slave.uuid"/>
              </SlaveUUID>
              <OpMode>
                <Variable variablenname="opMode"/>
              </OpMode>
              <MajorVersion>
                <Random/>
              </MajorVersion>
              <MinorVersion>
                <Random/>
              </MinorVersion>
            </STC_register>
          </Sending>
        </AddTransition>
        <AddTransition fromOffset="1" toOffset="2">
          <Receiving>
            <RSP_nack>
              <Sender>
                <Value value="1"/>
              </Sender>
              <ErrorCode>
                <!-- INVALID_OP_MODE -->
                <Value value="8200"/>
              </ErrorCode>
            </RSP_nack>
          </Receiving>
        </AddTransition>
        <UpdateMaxStep increase="2"/>
      </IfVariableNotInDcpSlaveDescription>
    </ForEach>
    <!-- Wrong UUID -->
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_register>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Value value="0"/>
          </StateId>
          <SlaveUUID>
            <Invalid/>
          </SlaveUUID>
          <OpMode>
            <Random/>
          </OpMode>
          <MajorVersion>
            <Random/>
          </MajorVersion>
          <MinorVersion>
            <Random/>
          </MinorVersion>
        </STC_register>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- INVALID_UUID -->
            <Value value="8209"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>

    <!-- major version does not match-->
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_register>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Value value="0"/>
          </StateId>
          <SlaveUUID>
            <Random/>
          </SlaveUUID>
          <OpMode>
            <Random/>
          </OpMode>
          <MajorVersion>
            <Invalid/>
          </MajorVersion>
          <MinorVersion>
            <Random/>
          </MinorVersion>
        </STC_register>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- INVALID_MAJOR_VERSION -->
            <Value value="8197"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <!-- minor version does not match-->
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_register>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Value value="0"/>
          </StateId>
          <SlaveUUID>
            <Random/>
          </SlaveUUID>
          <OpMode>
            <Random/>
          </OpMode>
          <MajorVersion>
            <Random/>
          </MajorVersion>
          <MinorVersion>
            <Invalid/>
          </MinorVersion>
        </STC_register>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- INVALID_MINOR_VERSION -->
            <Value value="8198"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
  </ExtensionSet>


  <!-- Configuration -->
  <ExtensionSet state="1">
     <!-- Check if slave checks PDU_NOT_ALLOWED -->
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_register>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
          <SlaveUUID>
            <Invalid/>
          </SlaveUUID>
          <OpMode>
            <Invalid/>
          </OpMode>
          <MajorVersion>
            <Invalid/>
          </MajorVersion>
          <MinorVersion>
            <Invalid/>
          </MinorVersion>
        </STC_register>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_configure>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
        </STC_configure>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_initialize>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
        </STC_initialize>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_run>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
          <StartTime>
            <Invalid/>
          </StartTime>
        </STC_run>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_send_outputs>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
        </STC_send_outputs>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_stop>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
        </STC_stop>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_reset>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
        </STC_reset>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_clear>
          <Receiver>
            <Value value="1"/>
          </Receiver>
        </CFG_clear>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_ack>
          <Sender>
            <Value value="1"/>
          </Sender>
        </RSP_ack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>

    <!-- Wrong state in transition-->
    <ForEach variableName="oState">
      <Set>
        <DcpStates/>
      </Set>
      <If condition="state != oState">
        <AddTransition fromOffset="0" toOffset="1">
          <Sending>
            <STC_prepare>
              <Receiver>
                <Value value="1"/>
              </Receiver>
              <StateId>
                <Variable variablenname="oState"/>
              </StateId>
            </STC_prepare>
          </Sending>
        </AddTransition>
        <AddTransition fromOffset="1" toOffset="2">
          <Receiving>
            <RSP_nack>
              <Sender>
                <Value value="1"/>
              </Sender>
              <ErrorCode>
                <!-- INVALID_STATE_ID -->
                <Value value="8205"/>
              </ErrorCode>
            </RSP_nack>
          </Receiving>
        </AddTransition>
        <UpdateMaxStep increase="2"/>
      </If>
    </ForEach>
    <!-- INCOMPLETE_CONFIGURATION No Gaps in CFG_config_output -->
    <If condition="hasOutput()">
      <AddTransition fromOffset="0" toOffset="1">
        <Sending>
          <CFG_output>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <DataId>
              <Value value="0"/>
            </DataId>
            <Pos>
              <Value value="0"/>
            </Pos>
            <SourceVr>
              <Random/>
            </SourceVr>
          </CFG_output>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="1" toOffset="2">
        <Receiving>
          <RSP_ack>
            <Sender>
              <Value value="1"/>
            </Sender>
          </RSP_ack>
        </Receiving>
      </AddTransition>
      <UpdateMaxStep increase="2"/>

      <AddTransition fromOffset="0" toOffset="1">
        <Sending>
          <CFG_output>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <DataId>
              <Value value="0"/>
            </DataId>
            <Pos>
              <Value value="2"/>
            </Pos>
            <SourceVr>
              <Random/>
            </SourceVr>
          </CFG_output>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="1" toOffset="2">
        <Receiving>
          <RSP_ack>
            <Sender>
              <Value value="1"/>
            </Sender>
          </RSP_ack>
        </Receiving>
      </AddTransition>
      <UpdateMaxStep increase="2"/>

      <AddTransition fromOffset="0" toOffset="1">
        <Sending>
          <STC_prepare>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <StateId>
              <Value value="1"/>
            </StateId>
          </STC_prepare>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="1" toOffset="2">
        <Receiving>
          <RSP_nack>
            <Sender>
              <Value value="1"/>
            </Sender>
            <!-- INCOMPLETE_CONFIG_GAP_OUTPUT_POS -->
            <ErrorCode>
              <Value value="12290"/>
            </ErrorCode>
          </RSP_nack>
        </Receiving>
      </AddTransition>
      <UpdateMaxStep increase="2"/>

      <AddTransition fromOffset="0" toOffset="1">
        <Sending>
          <CFG_output>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <DataId>
              <Value value="0"/>
            </DataId>
            <Pos>
              <Value value="1"/>
            </Pos>
            <SourceVr>
              <Random/>
            </SourceVr>
          </CFG_output>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="1" toOffset="2">
        <Receiving>
          <RSP_ack>
            <Sender>
              <Value value="1"/>
            </Sender>
          </RSP_ack>
        </Receiving>
      </AddTransition>
      <UpdateMaxStep increase="2"/>

      <!-- INCOMPLETE_CONFIGURATION CFG_set_target_network_information was not set-->

      <AddTransition fromOffset="0" toOffset="1">
        <Sending>
          <STC_prepare>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <StateId>
              <Value value="1"/>
            </StateId>
          </STC_prepare>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="1" toOffset="2">
        <Receiving>
          <RSP_nack>
            <Sender>
              <Value value="1"/>
            </Sender>
            <!-- INCOMPLETE_CONFIG_NW_INFO_OUTPUT -->
            <ErrorCode>
              <Value value="12293"/>
            </ErrorCode>
          </RSP_nack>
        </Receiving>
      </AddTransition>
      <UpdateMaxStep increase="2"/>


      <AddTransition fromOffset="0" toOffset="1">
        <Sending>
          <CFG_target_network_information_TCP_IPv4>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <DataId>
              <Value value="0"/>
            </DataId>
            <TransportProtocol>
              <Value value="4"/>
            </TransportProtocol>
            <IpAdress>
              <Variable variablenname="Tester.ip"/>
            </IpAdress>
            <Port>
              <Variable variablenname="Tester.port"/>
            </Port>
          </CFG_target_network_information_TCP_IPv4>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="1" toOffset="2">
        <Receiving>
          <RSP_ack>
            <Sender>
              <Value value="1"/>
            </Sender>
          </RSP_ack>
        </Receiving>
      </AddTransition>
      <UpdateMaxStep increase="2"/>

      <!-- INCOMPLETE_CONFIGURATION CFG_config_steps was not set-->

      <AddTransition fromOffset="0" toOffset="1">
        <Sending>
          <STC_prepare>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <StateId>
              <Value value="1"/>
            </StateId>
          </STC_prepare>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="1" toOffset="2">
        <Receiving>
          <RSP_nack>
            <Sender>
              <Value value="1"/>
            </Sender>
            <!-- INCOMPLETE_CONFIG_STEPS -->
            <ErrorCode>
              <Value value="12296"/>
            </ErrorCode>
          </RSP_nack>
        </Receiving>
      </AddTransition>
      <UpdateMaxStep increase="2"/>

      <AddTransition fromOffset="0" toOffset="1">
        <Sending>
          <CFG_steps>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <DataId>
              <Value value="0"/>
            </DataId>
            <Steps>
              <Random/>
            </Steps>
          </CFG_steps>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="1" toOffset="2">
        <Receiving>
          <RSP_ack>
            <Sender>
              <Value value="1"/>
            </Sender>
          </RSP_ack>
        </Receiving>
      </AddTransition>
      <UpdateMaxStep increase="2"/>

      

      <!-- INCOMPLETE_CONFIGURATION CFG_scope was not set-->

      <AddTransition fromOffset="0" toOffset="1">
        <Sending>
          <STC_prepare>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <StateId>
              <Value value="1"/>
            </StateId>
          </STC_prepare>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="1" toOffset="2">
        <Receiving>
          <RSP_nack>
            <Sender>
              <Value value="1"/>
            </Sender>
            <!-- INCOMPLETE_CONFIG_SCOPE -->
            <ErrorCode>
              <Value value="12295"/>
            </ErrorCode>
          </RSP_nack>
        </Receiving>
      </AddTransition>
      <UpdateMaxStep increase="2"/>



      <AddTransition fromOffset="0" toOffset="1">
        <Sending>
          <CFG_clear>
            <Receiver>
              <Value value="1"/>
            </Receiver>
          </CFG_clear>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="1" toOffset="2">
        <Receiving>
          <RSP_ack>
            <Sender>
              <Value value="1"/>
            </Sender>
          </RSP_ack>
        </Receiving>
      </AddTransition>
      <UpdateMaxStep increase="2"/>
    </If>

    <If condition="hasInput()">
      <!-- INCOMPLETE_CONFIGURATION No Gaps in CFG_config_input -->
      <AddTransition fromOffset="0" toOffset="1">
        <Sending>
          <CFG_input>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <DataId>
              <Value value="0"/>
            </DataId>
            <Pos>
              <Value value="0"/>
            </Pos>
            <TargetVr>
              <Random/>
            </TargetVr>
            <SourceDataType>
              <Random/>
            </SourceDataType>
          </CFG_input>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="1" toOffset="2">
        <Receiving>
          <RSP_ack>
            <Sender>
              <Value value="1"/>
            </Sender>
          </RSP_ack>
        </Receiving>
      </AddTransition>
      <UpdateMaxStep increase="2"/>

      <AddTransition fromOffset="0" toOffset="1">
        <Sending>
          <CFG_input>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <DataId>
              <Value value="0"/>
            </DataId>
            <Pos>
              <Value value="2"/>
            </Pos>
            <TargetVr>
              <Random/>
            </TargetVr>
            <SourceDataType>
              <Random/>
            </SourceDataType>
          </CFG_input>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="1" toOffset="2">
        <Receiving>
          <RSP_ack>
            <Sender>
              <Value value="1"/>
            </Sender>
          </RSP_ack>
        </Receiving>
      </AddTransition>
      <UpdateMaxStep increase="2"/>
      <AddTransition fromOffset="0" toOffset="1">
        <Sending>
          <STC_prepare>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <StateId>
              <Value value="1"/>
            </StateId>
          </STC_prepare>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="1" toOffset="2">
        <Receiving>
          <RSP_nack>
            <Sender>
              <Value value="1"/>
            </Sender>
            <!-- INCOMPLETE_CONFIG_GAP_INPUT_POS -->
            <ErrorCode>
              <Value value="12289"/>
            </ErrorCode>
          </RSP_nack>
        </Receiving>
      </AddTransition>
      <UpdateMaxStep increase="2"/>
      <AddTransition fromOffset="0" toOffset="1">
        <Sending>
          <CFG_input>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <DataId>
              <Value value="0"/>
            </DataId>
            <Pos>
              <Value value="1"/>
            </Pos>
            <TargetVr>
              <Random/>
            </TargetVr>
            <SourceDataType>
              <Random/>
            </SourceDataType>
          </CFG_input>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="1" toOffset="2">
        <Receiving>
          <RSP_ack>
            <Sender>
              <Value value="1"/>
            </Sender>
          </RSP_ack>
        </Receiving>
      </AddTransition>
      <UpdateMaxStep increase="2"/>
      <AddTransition fromOffset="0" toOffset="1">
        <Sending>
          <STC_prepare>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <StateId>
              <Value value="1"/>
            </StateId>
          </STC_prepare>
        </Sending>
      </AddTransition>

      <AddTransition fromOffset="1" toOffset="2">
        <Receiving>
          <RSP_nack>
            <Sender>
              <Value value="1"/>
            </Sender>
            <!-- INCOMPLETE_CONFIG_NW_INFO_INPUT -->
            <ErrorCode>
              <Value value="12292"/>
            </ErrorCode>
          </RSP_nack>
        </Receiving>
      </AddTransition>
      <UpdateMaxStep increase="2"/>
      <AddTransition fromOffset="0" toOffset="1">
        <Sending>
          <CFG_clear>
            <Receiver>
              <Value value="1"/>
            </Receiver>
          </CFG_clear>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="1" toOffset="2">
        <Receiving>
          <RSP_ack>
            <Sender>
              <Value value="1"/>
            </Sender>
          </RSP_ack>
        </Receiving>
      </AddTransition>
      <UpdateMaxStep increase="2"/>
    </If>
    <!-- INCOMPLETE_CONFIGURATION No Gaps in CFG_config_tunable_paramter -->
    <If condition="hasTunableParameter()">
      <AddTransition fromOffset="0" toOffset="1">
        <Sending>
          <CFG_tunable_parameter>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <ParamId>
              <Value value="0"/>
            </ParamId>
            <Pos>
              <Value value="0"/>
            </Pos>
            <TargetVr>
              <Random/>
            </TargetVr>
            <SourceDataType>
              <Random/>
            </SourceDataType>
          </CFG_tunable_parameter>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="1" toOffset="2">
        <Receiving>
          <RSP_ack>
            <Sender>
              <Value value="1"/>
            </Sender>
          </RSP_ack>
        </Receiving>
      </AddTransition>
      <UpdateMaxStep increase="2"/>
      <AddTransition fromOffset="0" toOffset="1">
        <Sending>
          <CFG_tunable_parameter>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <ParamId>
              <Value value="0"/>
            </ParamId>
            <Pos>
              <Value value="2"/>
            </Pos>
            <TargetVr>
              <Random/>
            </TargetVr>
            <SourceDataType>
              <Random/>
            </SourceDataType>
          </CFG_tunable_parameter>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="1" toOffset="2">
        <Receiving>
          <RSP_ack>
            <Sender>
              <Value value="1"/>
            </Sender>
          </RSP_ack>
        </Receiving>
      </AddTransition>
      <UpdateMaxStep increase="2"/>

      <AddTransition fromOffset="0" toOffset="1">
        <Sending>
          <STC_prepare>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <StateId>
              <Value value="1"/>
            </StateId>
          </STC_prepare>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="1" toOffset="2">
        <Receiving>
          <RSP_nack>
            <Sender>
              <Value value="1"/>
            </Sender>
            <!-- INCOMPLETE_CONFIG_GAP_TUNABLE_POS -->
            <ErrorCode>
              <Value value="12291"/>
            </ErrorCode>
          </RSP_nack>
        </Receiving>
      </AddTransition>
      <UpdateMaxStep increase="2"/>

      <AddTransition fromOffset="0" toOffset="1">
        <Sending>
          <CFG_tunable_parameter>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <ParamId>
              <Value value="0"/>
            </ParamId>
            <Pos>
              <Value value="1"/>
            </Pos>
            <TargetVr>
              <Random/>
            </TargetVr>
            <SourceDataType>
              <Random/>
            </SourceDataType>
          </CFG_tunable_parameter>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="1" toOffset="2">
        <Receiving>
          <RSP_ack>
            <Sender>
              <Value value="1"/>
            </Sender>
          </RSP_ack>
        </Receiving>
      </AddTransition>
      <UpdateMaxStep increase="2"/>
      <!-- INCOMPLETE_CONFIGURATION CFG_set_param_network_information was not set-->

      <AddTransition fromOffset="0" toOffset="1">
        <Sending>
          <STC_prepare>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <StateId>
              <Value value="1"/>
            </StateId>
          </STC_prepare>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="1" toOffset="2">
        <Receiving>
          <RSP_nack>
            <Sender>
              <Value value="1"/>
            </Sender>
            <!-- INCOMPLETE_CONFIG_NW_INFO_TUNABLE -->
            <ErrorCode>
              <Value value="12294"/>
            </ErrorCode>
          </RSP_nack>
        </Receiving>
      </AddTransition>
      <UpdateMaxStep increase="2"/>
      <AddTransition fromOffset="0" toOffset="1">
        <Sending>
          <CFG_clear>
            <Receiver>
              <Value value="1"/>
            </Receiver>
          </CFG_clear>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="1" toOffset="2">
        <Receiving>
          <RSP_ack>
            <Sender>
              <Value value="1"/>
            </Sender>
          </RSP_ack>
        </Receiving>
      </AddTransition>
      <UpdateMaxStep increase="2"/>
    </If>

    <!-- Unkwown value reference input -->
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_input>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <DataId>
            <Value value="0"/>
          </DataId>
          <Pos>
            <Random/>
          </Pos>
          <TargetVr>
            <Invalid/>
          </TargetVr>
          <SourceDataType>
            <Invalid/>
          </SourceDataType>
        </CFG_input>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- INVALID_VALUE_REFERENCE -->
            <Value value="8210"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <!-- Unkwown value reference output -->
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_output>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <DataId>
            <Value value="0"/>
          </DataId>
          <Pos>
            <Random/>
          </Pos>
          <SourceVr>
            <Invalid/>
          </SourceVr>
        </CFG_output>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- INVALID_VALUE_REFERENCE -->
            <Value value="8210"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <!-- Unkwown value reference parameter -->
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_parameter>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <TargetVr>
            <Invalid/>
          </TargetVr>
          <SourceDataType>
            <Invalid/>
          </SourceDataType>
          <payload>
            <Invalid/>
          </payload>
        </CFG_parameter>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- INVALID_VALUE_REFERENCE -->
            <Value value="8210"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <!-- Unkwown value reference tunable parameter -->

    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_tunable_parameter>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <ParamId>
            <Value value="0"/>
          </ParamId>
          <Pos>
            <Random/>
          </Pos>
          <TargetVr>
            <Invalid/>
          </TargetVr>
          <SourceDataType>
            <Invalid/>
          </SourceDataType>
        </CFG_tunable_parameter>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- INVALID_VALUE_REFERENCE -->
            <Value value="8210"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <!-- ToDo Not supported Log Category -->

    <!-- ToDo Unknown PDU -->

    <!-- Wrong time resolution -->
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_time_res>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <Numerator>
            <Invalid/>
          </Numerator>
          <Denominator>
            <Invalid/>
          </Denominator>
        </CFG_time_res>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- INVALID_TIME_RESOLUTION -->
            <Value value="8207"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <!-- Wrong data type to input assignment-->
    <ForEach variableName="input">
      <Set>
        <Slave.Inputs/>
      </Set>
      <AddTransition fromOffset="0" toOffset="1">
        <Sending>
          <CFG_input>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <DataId>
              <Value value="0"/>
            </DataId>
            <Pos>
              <Value value="0"/>
            </Pos>
            <TargetVr>
              <Variable variablenname="input.valueReference"/>
            </TargetVr>
            <SourceDataType>
              <Invalid/>
            </SourceDataType>
          </CFG_input>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="1" toOffset="2">
        <Receiving>
          <RSP_nack>
            <Sender>
              <Value value="1"/>
            </Sender>
            <ErrorCode>
              <!-- INVALID_SOURCE_DATA_TYPE -->
              <Value value="8203"/>
            </ErrorCode>
          </RSP_nack>
        </Receiving>
      </AddTransition>
      <UpdateMaxStep increase="2"/>
    </ForEach>
    <!-- Wrong data type to tunable parameter assignment-->
    <ForEach variableName="parameter">
      <Set>
        <Slave.TunableParameters/>
      </Set>
      <AddTransition fromOffset="0" toOffset="1">
        <Sending>
          <CFG_tunable_parameter>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <ParamId>
              <Value value="0"/>
            </ParamId>
            <Pos>
              <Value value="0"/>
            </Pos>
            <TargetVr>
              <Variable variablenname="parameter.valueReference"/>
            </TargetVr>
            <SourceDataType>
              <Invalid/>
            </SourceDataType>
          </CFG_tunable_parameter>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="1" toOffset="2">
        <Receiving>
          <RSP_nack>
            <Sender>
              <Value value="1"/>
            </Sender>
            <ErrorCode>
              <!-- INVALID_SOURCE_DATA_TYPE -->
              <Value value="8203"/>
            </ErrorCode>
          </RSP_nack>
        </Receiving>
      </AddTransition>
      <UpdateMaxStep increase="2"/>
    </ForEach>



    <!-- Start configuration for normal operation -->
    <!-- clear previous configuration -->
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_clear>
          <Receiver>
            <Value value="1"/>
          </Receiver>
        </CFG_clear>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_ack>
          <Sender>
            <Value value="1"/>
          </Sender>
        </RSP_ack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>

    <!-- Configure Inputs -->
    <ForEach variableName="input">
      <Set>
        <Slave.Inputs/>
      </Set>
      <AddTransition fromOffset="0" toOffset="1">
        <Sending>
          <CFG_input>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <DataId>
              <Variable variablenname="dataId(input.valueReference)"/>
            </DataId>
            <Pos>
              <Value value="0"/>
            </Pos>
            <TargetVr>
              <Variable variablenname="input.valueReference"/>
            </TargetVr>
            <SourceDataType>
              <Variable variablenname="dataType(input.valueReference)"/>
            </SourceDataType>
          </CFG_input>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="1" toOffset="2">
        <Receiving>
          <RSP_ack>
            <Sender>
              <Value value="1"/>
            </Sender>
          </RSP_ack>
        </Receiving>
      </AddTransition>
      <AddTransition fromOffset="2" toOffset="3">
        <Sending>
          <CFG_source_network_information_TCP_IPv4>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <DataId>
              <Variable variablenname="dataId(input.valueReference)"/>
            </DataId>
            <TransportProtocol>
              <Value value="4"/>
            </TransportProtocol>
            <IpAdress>
              <Random/>
            </IpAdress>
            <Port>
              <Random/>
            </Port>
          </CFG_source_network_information_TCP_IPv4>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="3" toOffset="4">
        <Receiving>
          <RSP_ack>
            <Sender>
              <Value value="1"/>
            </Sender>
          </RSP_ack>
        </Receiving>
      </AddTransition>
      <AddTransition fromOffset="4" toOffset="5">
        <Sending>
          <CFG_scope>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <DataId>
              <Variable variablenname="dataId(input.valueReference)"/>
            </DataId>
            <Scope>
              <Value value="0"/>
            </Scope>
          </CFG_scope>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="5" toOffset="6">
        <Receiving>
          <RSP_ack>
            <Sender>
              <Value value="1"/>
            </Sender>
          </RSP_ack>
        </Receiving>
      </AddTransition>
      <UpdateMaxStep increase="6"/>
    </ForEach>
    <!-- Configure Outputs -->
    <ForEach variableName="output">
      <Set>
        <Slave.Outputs/>
      </Set>
      <AddTransition fromOffset="0" toOffset="1">
        <Sending>
          <CFG_output>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <DataId>
              <Variable variablenname="dataId(output.valueReference)"/>
            </DataId>
            <Pos>
              <Value value="0"/>
            </Pos>
            <SourceVr>
              <Variable variablenname="output.valueReference"/>
            </SourceVr>
          </CFG_output>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="1" toOffset="2">
        <Receiving>
          <RSP_ack>
            <Sender>
              <Value value="1"/>
            </Sender>
          </RSP_ack>
        </Receiving>
      </AddTransition>
      <AddTransition fromOffset="2" toOffset="3">
        <Sending>
          <CFG_target_network_information_TCP_IPv4>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <DataId>
              <Variable variablenname="dataId(output.valueReference)"/>
            </DataId>
            <TransportProtocol>
              <Value value="4"/>
            </TransportProtocol>
            <IpAdress>
              <Variable variablenname="Tester.ip"/>
            </IpAdress>
            <Port>
              <Variable variablenname="Tester.port"/>
            </Port>
          </CFG_target_network_information_TCP_IPv4>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="3" toOffset="4">
        <Receiving>
          <RSP_ack>
            <Sender>
              <Value value="1"/>
            </Sender>
          </RSP_ack>
        </Receiving>
      </AddTransition>

      <AddTransition fromOffset="4" toOffset="5">
        <Sending>
          <CFG_steps>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <DataId>
              <Variable variablenname="dataId(output.valueReference)"/>
            </DataId>
            <Steps>
              <Random/>
            </Steps>
          </CFG_steps>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="5" toOffset="6">
        <Receiving>
          <RSP_ack>
            <Sender>
              <Value value="1"/>
            </Sender>
          </RSP_ack>
        </Receiving>
      </AddTransition>
      <AddTransition fromOffset="6" toOffset="7">
        <Sending>
          <CFG_scope>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <DataId>
              <Variable variablenname="dataId(output.valueReference)"/>
            </DataId>
            <Scope>
              <Value value="0"/>
            </Scope>
          </CFG_scope>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="7" toOffset="8">
        <Receiving>
          <RSP_ack>
            <Sender>
              <Value value="1"/>
            </Sender>
          </RSP_ack>
        </Receiving>
      </AddTransition>
      <UpdateMaxStep increase="8"/>
    </ForEach>
    <!-- Configure parameter -->
    <ForEach variableName="parameter">
      <Set>
        <Slave.TunableParameters/>
      </Set>
      <AddTransition fromOffset="0" toOffset="1">
        <Sending>
          <CFG_tunable_parameter>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <ParamId>
              <Variable variablenname="paramId(parameter.valueReference)"/>
            </ParamId>
            <Pos>
              <Value value="0"/>
            </Pos>
            <TargetVr>
              <Variable variablenname="parameter.valueReference"/>
            </TargetVr>
            <SourceDataType>
              <Variable variablenname="dataType(parameter.valueReference)"/>
            </SourceDataType>
          </CFG_tunable_parameter>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="1" toOffset="2">
        <Receiving>
          <RSP_ack>
            <Sender>
              <Value value="1"/>
            </Sender>
          </RSP_ack>
        </Receiving>
      </AddTransition>
      <AddTransition fromOffset="2" toOffset="3">
        <Sending>
          <CFG_param_network_information_TCP_IPv4>
            <Receiver>
              <Value value="1"/>
            </Receiver>
            <ParamId>
              <Variable variablenname="paramId(parameter.valueReference)"/>
            </ParamId>
            <TransportProtocol>
              <Value value="4"/>
            </TransportProtocol>
            <IpAdress>
              <Random/>
            </IpAdress>
            <Port>
              <Random/>
            </Port>
          </CFG_param_network_information_TCP_IPv4>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="3" toOffset="4">
        <Receiving>
          <RSP_ack>
            <Sender>
              <Value value="1"/>
            </Sender>
          </RSP_ack>
        </Receiving>
      </AddTransition>
      <UpdateMaxStep increase="4"/>
    </ForEach>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_time_res>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <Numerator>
            <Random/>
          </Numerator>
          <Denominator>
            <Random/>
          </Denominator>
        </CFG_time_res>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_ack>
          <Sender>
            <Value value="1"/>
          </Sender>
        </RSP_ack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
  </ExtensionSet>

  <!-- PREPARING -->
  <ExtensionSet state="2">
    <!-- Wrong state in transition-->
    <ForEach variableName="oState">
      <Set>
        <DcpStates/>
      </Set>
      <If condition="state != oState">
        <!-- If state is equal to PREPARED the PDU would be correct and have to akced instead of nack -->
        <If condition="oState != &quot;PREPARED&quot;">
          <AddTransition fromOffset="0" toVariable="breakpoint(step, 3)">
            <Receiving>
              <NTF_state_changed>
                <Sender>
                  <Value value="1"/>
                </Sender>
                <StateId>
                  <Value value="3"/>
                </StateId>
              </NTF_state_changed>
            </Receiving>
          </AddTransition>
          <AddTransition fromOffset="0" toOffset="1">
            <Sending>
              <STC_stop>
                <Receiver>
                  <Value value="1"/>
                </Receiver>
                <StateId>
                  <Variable variablenname="oState"/>
                </StateId>
              </STC_stop>
            </Sending>
          </AddTransition>
          <AddTransition fromOffset="1" toOffset="3">
            <Receiving>
              <RSP_nack>
                <Sender>
                  <Value value="1"/>
                </Sender>
                <ErrorCode>
                  <!-- INVALID_STATE_ID -->
                  <Value value="8205"/>
                </ErrorCode>
              </RSP_nack>
            </Receiving>
          </AddTransition>
          <!-- It is possible while testing wrong stateId the state change to PREPARED-->
          <AddTransition fromOffset="1" toOffset="2">
            <Receiving>
              <NTF_state_changed>
                <Sender>
                  <Value value="1"/>
                </Sender>
                <StateId>
                  <Value value="3"/>
                </StateId>
              </NTF_state_changed>
            </Receiving>
          </AddTransition>
          <AddTransition fromOffset="2" toVariable="breakpoint(step, 3)">
            <Receiving>
              <RSP_nack>
                <Sender>
                  <Value value="1"/>
                </Sender>
                <ErrorCode>
                  <!-- INVALID_STATE_ID -->
                  <Value value="8205"/>
                </ErrorCode>
              </RSP_nack>
            </Receiving>
          </AddTransition>
          <UpdateMaxStep increase="3"/>
        </If>
      </If>
    </ForEach>
  </ExtensionSet>

  <!-- PREPARED -->
  <ExtensionSet state="3">
     <!-- Check if slave checks PDU_NOT_ALLOWED -->
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_clear>
          <Receiver>
            <Value value="1"/>
          </Receiver>
        </CFG_clear>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_time_res>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <Numerator>
            <Invalid/>
          </Numerator>
          <Denominator>
            <Invalid/>
          </Denominator>
        </CFG_time_res>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_steps>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <DataId>
            <Invalid/>
          </DataId>
          <Steps>
            <Invalid/>
          </Steps>
        </CFG_steps>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_input>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <DataId>
            <Invalid/>
          </DataId>
          <Pos>
            <Invalid/>
          </Pos>
          <TargetVr>
            <Invalid/>
          </TargetVr>
          <SourceDataType>
            <Invalid/>
          </SourceDataType>
        </CFG_input>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_output>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <DataId>
            <Invalid/>
          </DataId>
          <Pos>
            <Invalid/>
          </Pos>
          <SourceVr>
            <Invalid/>
          </SourceVr>
        </CFG_output>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_source_network_information_TCP_IPv4>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <DataId>
            <Invalid/>
          </DataId>
          <TransportProtocol>
            <Invalid/>
          </TransportProtocol>
          <IpAdress>
            <Invalid/>
          </IpAdress>
          <Port>
            <Invalid/>
          </Port>
        </CFG_source_network_information_TCP_IPv4>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_target_network_information_TCP_IPv4>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <DataId>
            <Invalid/>
          </DataId>
          <TransportProtocol>
            <Invalid/>
          </TransportProtocol>
          <IpAdress>
            <Invalid/>
          </IpAdress>
          <Port>
            <Invalid/>
          </Port>
        </CFG_target_network_information_TCP_IPv4>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_param_network_information_TCP_IPv4>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <ParamId>
            <Invalid/>
          </ParamId>
          <TransportProtocol>
            <Invalid/>
          </TransportProtocol>
          <IpAdress>
            <Invalid/>
          </IpAdress>
          <Port>
            <Invalid/>
          </Port>
        </CFG_param_network_information_TCP_IPv4>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_parameter>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <TargetVr>
            <Invalid/>
          </TargetVr>
          <SourceDataType>
            <Invalid/>
          </SourceDataType>
          <payload>
            <Invalid/>
          </payload>
        </CFG_parameter>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_tunable_parameter>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <ParamId>
            <Invalid/>
          </ParamId>
          <Pos>
            <Invalid/>
          </Pos>
          <TargetVr>
            <Invalid/>
          </TargetVr>
          <SourceDataType>
            <Invalid/>
          </SourceDataType>
        </CFG_tunable_parameter>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_logging>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <LogCategory>
            <Invalid/>
          </LogCategory>
          <LogLevel>
            <Invalid/>
          </LogLevel>
          <LogMode>
            <Invalid/>
          </LogMode>
        </CFG_logging>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_scope>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <DataId>
            <Invalid/>
          </DataId>
          <Scope>
            <Invalid/>
          </Scope>
        </CFG_scope>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_register>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
          <SlaveUUID>
            <Invalid/>
          </SlaveUUID>
          <OpMode>
            <Invalid/>
          </OpMode>
          <MajorVersion>
            <Invalid/>
          </MajorVersion>
          <MinorVersion>
            <Invalid/>
          </MinorVersion>
        </STC_register>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_unregister>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
        </STC_unregister>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_prepare>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
        </STC_prepare>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_initialize>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
        </STC_initialize>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_run>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
          <StartTime>
            <Invalid/>
          </StartTime>
        </STC_run>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_send_outputs>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
        </STC_send_outputs>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_reset>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
        </STC_reset>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
   
    <ForEach variableName="oState">
      <Set>
        <DcpStates/>
      </Set>
      <If condition="state != oState">
        <AddTransition fromOffset="0" toOffset="1">
          <Sending>
            <STC_stop>
              <Receiver>
                <Value value="1"/>
              </Receiver>
              <StateId>
                <Variable variablenname="oState"/>
              </StateId>
            </STC_stop>
          </Sending>
        </AddTransition>
        <AddTransition fromOffset="1" toOffset="2">
          <Receiving>
            <RSP_nack>
              <Sender>
                <Value value="1"/>
              </Sender>
              <ErrorCode>
                <!-- INVALID_STATE_ID -->
                <Value value="8205"/>
              </ErrorCode>
            </RSP_nack>
          </Receiving>
        </AddTransition>
        <AddTransition fromOffset="2" toOffset="3">
          <Sending>
            <STC_configure>
              <Receiver>
                <Value value="1"/>
              </Receiver>
              <StateId>
                <Variable variablenname="oState"/>
              </StateId>
            </STC_configure>
          </Sending>
        </AddTransition>
        <AddTransition fromOffset="3" toOffset="4">
          <Receiving>
            <RSP_nack>
              <Sender>
                <Value value="1"/>
              </Sender>
              <ErrorCode>
                <!-- INVALID_STATE_ID -->
                <Value value="8205"/>
              </ErrorCode>
            </RSP_nack>
          </Receiving>
        </AddTransition>
        <UpdateMaxStep increase="4"/>
      </If>
    </ForEach>
  </ExtensionSet>

  <!-- CONFIGURING -->
  <ExtensionSet state="4">
    <!-- Wrong state in transition-->
    <ForEach variableName="oState">
      <Set>
        <DcpStates/>
      </Set>
      <If condition="state != oState">
        <!-- If state is equal to ﻿CONFIGURED the PDU would be correct and have to akced instead of nack -->
        <If condition="oState != &quot;﻿CONFIGURED&quot;">
          <AddTransition fromOffset="0" toVariable="breakpoint(step, 5)">
            <Receiving>
              <NTF_state_changed>
                <Sender>
                  <Value value="1"/>
                </Sender>
                <StateId>
                  <Value value="5"/>
                </StateId>
              </NTF_state_changed>
            </Receiving>
          </AddTransition>
          <AddTransition fromOffset="0" toOffset="1">
            <Sending>
              <STC_stop>
                <Receiver>
                  <Value value="1"/>
                </Receiver>
                <StateId>
                  <Variable variablenname="oState"/>
                </StateId>
              </STC_stop>
            </Sending>
          </AddTransition>
          <AddTransition fromOffset="1" toOffset="3">
            <Receiving>
              <RSP_nack>
                <Sender>
                  <Value value="1"/>
                </Sender>
                <ErrorCode>
                  <!-- INVALID_STATE_ID -->
                  <Value value="8205"/>
                </ErrorCode>
              </RSP_nack>
            </Receiving>
          </AddTransition>
          <!-- It is possible while testing wrong stateId the state change to CONFIGURED-->
          <AddTransition fromOffset="1" toOffset="2">
            <Receiving>
              <NTF_state_changed>
                <Sender>
                  <Value value="1"/>
                </Sender>
                <StateId>
                  <Value value="5"/>
                </StateId>
              </NTF_state_changed>
            </Receiving>
          </AddTransition>
          <AddTransition fromOffset="2" toVariable="breakpoint(step, 5)">
            <Receiving>
              <RSP_nack>
                <Sender>
                  <Value value="1"/>
                </Sender>
                <ErrorCode>
                  <!-- INVALID_STATE_ID -->
                  <Value value="8205"/>
                </ErrorCode>
              </RSP_nack>
            </Receiving>
          </AddTransition>
          <UpdateMaxStep increase="3"/>
        </If>
      </If>
    </ForEach>
  </ExtensionSet>

  <!-- CONFIGURED -->
  <ExtensionSet state="5">
     <!-- Check if slave checks PDU_NOT_ALLOWED -->
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_clear>
          <Receiver>
            <Value value="1"/>
          </Receiver>
        </CFG_clear>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_time_res>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <Numerator>
            <Invalid/>
          </Numerator>
          <Denominator>
            <Invalid/>
          </Denominator>
        </CFG_time_res>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_steps>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <DataId>
            <Invalid/>
          </DataId>
          <Steps>
            <Invalid/>
          </Steps>
        </CFG_steps>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_input>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <DataId>
            <Invalid/>
          </DataId>
          <Pos>
            <Invalid/>
          </Pos>
          <TargetVr>
            <Invalid/>
          </TargetVr>
          <SourceDataType>
            <Invalid/>
          </SourceDataType>
        </CFG_input>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_output>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <DataId>
            <Invalid/>
          </DataId>
          <Pos>
            <Invalid/>
          </Pos>
          <SourceVr>
            <Invalid/>
          </SourceVr>
        </CFG_output>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_source_network_information_TCP_IPv4>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <DataId>
            <Invalid/>
          </DataId>
          <TransportProtocol>
            <Invalid/>
          </TransportProtocol>
          <IpAdress>
            <Invalid/>
          </IpAdress>
          <Port>
            <Invalid/>
          </Port>
        </CFG_source_network_information_TCP_IPv4>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_target_network_information_TCP_IPv4>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <DataId>
            <Invalid/>
          </DataId>
          <TransportProtocol>
            <Invalid/>
          </TransportProtocol>
          <IpAdress>
            <Invalid/>
          </IpAdress>
          <Port>
            <Invalid/>
          </Port>
        </CFG_target_network_information_TCP_IPv4>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_param_network_information_TCP_IPv4>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <ParamId>
            <Invalid/>
          </ParamId>
          <TransportProtocol>
            <Invalid/>
          </TransportProtocol>
          <IpAdress>
            <Invalid/>
          </IpAdress>
          <Port>
            <Invalid/>
          </Port>
        </CFG_param_network_information_TCP_IPv4>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_parameter>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <TargetVr>
            <Invalid/>
          </TargetVr>
          <SourceDataType>
            <Invalid/>
          </SourceDataType>
          <payload>
            <Invalid/>
          </payload>
        </CFG_parameter>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_tunable_parameter>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <ParamId>
            <Invalid/>
          </ParamId>
          <Pos>
            <Invalid/>
          </Pos>
          <TargetVr>
            <Invalid/>
          </TargetVr>
          <SourceDataType>
            <Invalid/>
          </SourceDataType>
        </CFG_tunable_parameter>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_logging>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <LogCategory>
            <Invalid/>
          </LogCategory>
          <LogLevel>
            <Invalid/>
          </LogLevel>
          <LogMode>
            <Invalid/>
          </LogMode>
        </CFG_logging>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_scope>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <DataId>
            <Invalid/>
          </DataId>
          <Scope>
            <Invalid/>
          </Scope>
        </CFG_scope>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_register>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
          <SlaveUUID>
            <Invalid/>
          </SlaveUUID>
          <OpMode>
            <Invalid/>
          </OpMode>
          <MajorVersion>
            <Invalid/>
          </MajorVersion>
          <MinorVersion>
            <Invalid/>
          </MinorVersion>
        </STC_register>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_unregister>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
        </STC_unregister>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_prepare>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
        </STC_prepare>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_configure>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
        </STC_configure>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_send_outputs>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
        </STC_send_outputs>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_reset>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
        </STC_reset>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
   
    <ForEach variableName="oState">
      <Set>
        <DcpStates/>
      </Set>
      <If condition="state != oState">
        <AddTransition fromOffset="0" toOffset="1">
          <Sending>
            <STC_stop>
              <Receiver>
                <Value value="1"/>
              </Receiver>
              <StateId>
                <Variable variablenname="oState"/>
              </StateId>
            </STC_stop>
          </Sending>
        </AddTransition>
        <AddTransition fromOffset="1" toOffset="2">
          <Receiving>
            <RSP_nack>
              <Sender>
                <Value value="1"/>
              </Sender>
              <ErrorCode>
                <!-- INVALID_STATE_ID -->
                <Value value="8205"/>
              </ErrorCode>
            </RSP_nack>
          </Receiving>
        </AddTransition>
        <AddTransition fromOffset="2" toOffset="3">
          <Sending>
            <STC_initialize>
              <Receiver>
                <Value value="1"/>
              </Receiver>
              <StateId>
                <Variable variablenname="oState"/>
              </StateId>
            </STC_initialize>
          </Sending>
        </AddTransition>
        <AddTransition fromOffset="3" toOffset="4">
          <Receiving>
            <RSP_nack>
              <Sender>
                <Value value="1"/>
              </Sender>
              <ErrorCode>
                <!-- INVALID_STATE_ID -->
                <Value value="8205"/>
              </ErrorCode>
            </RSP_nack>
          </Receiving>
        </AddTransition>
        <AddTransition fromOffset="4" toOffset="5">
          <Sending>
            <STC_run>
              <Receiver>
                <Value value="1"/>
              </Receiver>
              <StateId>
                <Variable variablenname="oState"/>
              </StateId>
              <StartTime>
                <Value value="0"/>
              </StartTime>
            </STC_run>
          </Sending>
        </AddTransition>
        <AddTransition fromOffset="5" toOffset="6">
          <Receiving>
            <RSP_nack>
              <Sender>
                <Value value="1"/>
              </Sender>
              <ErrorCode>
                <!-- INVALID_STATE_ID -->
                <Value value="8205"/>
              </ErrorCode>
            </RSP_nack>
          </Receiving>
        </AddTransition>
        <UpdateMaxStep increase="6"/>
      </If>
    </ForEach>
  </ExtensionSet>


  <!-- INITIALIZING -->
  <ExtensionSet state="6">

    <!-- Wrong state in transition-->
    <ForEach variableName="oState">
      <Set>
        <DcpStates/>
      </Set>
      <If condition="state != oState">
        <!-- If state is equal to ﻿INITIALIZED the PDU would be correct and have to akced instead of nack -->
        <If condition="oState != &quot;﻿INITIALIZED&quot;">
          <AddTransition fromOffset="0" toVariable="breakpoint(step, 7)">
            <Receiving>
              <NTF_state_changed>
                <Sender>
                  <Value value="1"/>
                </Sender>
                <StateId>
                  <Value value="7"/>
                </StateId>
              </NTF_state_changed>
            </Receiving>
          </AddTransition>
          <AddTransition fromOffset="0" toOffset="1">
            <Sending>
              <STC_stop>
                <Receiver>
                  <Value value="1"/>
                </Receiver>
                <StateId>
                  <Variable variablenname="oState"/>
                </StateId>
              </STC_stop>
            </Sending>
          </AddTransition>
          <AddTransition fromOffset="1" toOffset="3">
            <Receiving>
              <RSP_nack>
                <Sender>
                  <Value value="1"/>
                </Sender>
                <ErrorCode>
                  <!-- INVALID_STATE_ID -->
                  <Value value="8205"/>
                </ErrorCode>
              </RSP_nack>
            </Receiving>
          </AddTransition>
          <!-- It is possible while testing wron stateId the state change to ﻿INITIALIZED-->
          <AddTransition fromOffset="1" toOffset="2">
            <Receiving>
              <NTF_state_changed>
                <Sender>
                  <Value value="1"/>
                </Sender>
                <StateId>
                  <Value value="7"/>
                </StateId>
              </NTF_state_changed>
            </Receiving>
          </AddTransition>
          <AddTransition fromOffset="2" toVariable="breakpoint(step, 7)">
            <Receiving>
              <RSP_nack>
                <Sender>
                  <Value value="1"/>
                </Sender>
                <ErrorCode>
                  <!-- INVALID_STATE_ID -->
                  <Value value="8205"/>
                </ErrorCode>
              </RSP_nack>
            </Receiving>
          </AddTransition>

          <UpdateMaxStep increase="3"/>
        </If>
      </If>
    </ForEach>
  </ExtensionSet>

  <!-- INITIALIZED -->
  <ExtensionSet state="7">
     <!-- Check if slave checks PDU_NOT_ALLOWED -->
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_clear>
          <Receiver>
            <Value value="1"/>
          </Receiver>
        </CFG_clear>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_time_res>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <Numerator>
            <Invalid/>
          </Numerator>
          <Denominator>
            <Invalid/>
          </Denominator>
        </CFG_time_res>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_steps>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <DataId>
            <Invalid/>
          </DataId>
          <Steps>
            <Invalid/>
          </Steps>
        </CFG_steps>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_input>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <DataId>
            <Invalid/>
          </DataId>
          <Pos>
            <Invalid/>
          </Pos>
          <TargetVr>
            <Invalid/>
          </TargetVr>
          <SourceDataType>
            <Invalid/>
          </SourceDataType>
        </CFG_input>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_output>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <DataId>
            <Invalid/>
          </DataId>
          <Pos>
            <Invalid/>
          </Pos>
          <SourceVr>
            <Invalid/>
          </SourceVr>
        </CFG_output>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_source_network_information_TCP_IPv4>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <DataId>
            <Invalid/>
          </DataId>
          <TransportProtocol>
            <Invalid/>
          </TransportProtocol>
          <IpAdress>
            <Invalid/>
          </IpAdress>
          <Port>
            <Invalid/>
          </Port>
        </CFG_source_network_information_TCP_IPv4>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_target_network_information_TCP_IPv4>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <DataId>
            <Invalid/>
          </DataId>
          <TransportProtocol>
            <Invalid/>
          </TransportProtocol>
          <IpAdress>
            <Invalid/>
          </IpAdress>
          <Port>
            <Invalid/>
          </Port>
        </CFG_target_network_information_TCP_IPv4>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_param_network_information_TCP_IPv4>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <ParamId>
            <Invalid/>
          </ParamId>
          <TransportProtocol>
            <Invalid/>
          </TransportProtocol>
          <IpAdress>
            <Invalid/>
          </IpAdress>
          <Port>
            <Invalid/>
          </Port>
        </CFG_param_network_information_TCP_IPv4>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_parameter>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <TargetVr>
            <Invalid/>
          </TargetVr>
          <SourceDataType>
            <Invalid/>
          </SourceDataType>
          <payload>
            <Invalid/>
          </payload>
        </CFG_parameter>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_tunable_parameter>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <ParamId>
            <Invalid/>
          </ParamId>
          <Pos>
            <Invalid/>
          </Pos>
          <TargetVr>
            <Invalid/>
          </TargetVr>
          <SourceDataType>
            <Invalid/>
          </SourceDataType>
        </CFG_tunable_parameter>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_logging>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <LogCategory>
            <Invalid/>
          </LogCategory>
          <LogLevel>
            <Invalid/>
          </LogLevel>
          <LogMode>
            <Invalid/>
          </LogMode>
        </CFG_logging>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_scope>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <DataId>
            <Invalid/>
          </DataId>
          <Scope>
            <Invalid/>
          </Scope>
        </CFG_scope>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_register>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
          <SlaveUUID>
            <Invalid/>
          </SlaveUUID>
          <OpMode>
            <Invalid/>
          </OpMode>
          <MajorVersion>
            <Invalid/>
          </MajorVersion>
          <MinorVersion>
            <Invalid/>
          </MinorVersion>
        </STC_register>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_unregister>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
        </STC_unregister>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_prepare>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
        </STC_prepare>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_configure>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
        </STC_configure>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_initialize>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
        </STC_initialize>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_run>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
          <StartTime>
            <Invalid/>
          </StartTime>
        </STC_run>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_reset>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
        </STC_reset>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
  
    <!-- Wrong state in transition-->
    <ForEach variableName="oState">
      <Set>
        <DcpStates/>
      </Set>
      <If condition="state != oState">
        <AddTransition fromOffset="0" toOffset="1">
          <Sending>
            <STC_send_outputs>
              <Receiver>
                <Value value="1"/>
              </Receiver>
              <StateId>
                <Variable variablenname="oState"/>
              </StateId>
            </STC_send_outputs>
          </Sending>
        </AddTransition>
        <AddTransition fromOffset="1" toOffset="2">
          <Receiving>
            <RSP_nack>
              <Sender>
                <Value value="1"/>
              </Sender>
              <ErrorCode>
                <!-- INVALID_STATE_ID -->
                <Value value="8205"/>
              </ErrorCode>
            </RSP_nack>
          </Receiving>
        </AddTransition>
        <AddTransition fromOffset="2" toOffset="3">
          <Sending>
            <STC_stop>
              <Receiver>
                <Value value="1"/>
              </Receiver>
              <StateId>
                <Variable variablenname="oState"/>
              </StateId>
            </STC_stop>
          </Sending>
        </AddTransition>
        <AddTransition fromOffset="3" toOffset="4">
          <Receiving>
            <RSP_nack>
              <Sender>
                <Value value="1"/>
              </Sender>
              <ErrorCode>
                <!-- INVALID_STATE_ID -->
                <Value value="8205"/>
              </ErrorCode>
            </RSP_nack>
          </Receiving>
        </AddTransition>
        <UpdateMaxStep increase="4"/>
      </If>
    </ForEach>
  </ExtensionSet>


  <!-- SENDING_I -->
  <ExtensionSet state="8">
    <!-- Wrong state in transition-->
    <ForEach variableName="oState">
      <Set>
        <DcpStates/>
      </Set>
      <If condition="state != oState">
        <!-- If state is equal to ﻿CONFIGURED the PDU would be correct and have to akced instead of nack -->
        <If condition="oState != &quot;﻿CONFIGURED&quot;">
          <AddTransition fromOffset="0" toVariable="breakpoint(step, 5)">
            <Receiving>
              <NTF_state_changed>
                <Sender>
                  <Value value="1"/>
                </Sender>
                <StateId>
                  <Value value="5"/>
                </StateId>
              </NTF_state_changed>
            </Receiving>
          </AddTransition>
          <AddTransition fromOffset="0" toOffset="1">
            <Sending>
              <STC_stop>
                <Receiver>
                  <Value value="1"/>
                </Receiver>
                <StateId>
                  <Variable variablenname="oState"/>
                </StateId>
              </STC_stop>
            </Sending>
          </AddTransition>
          <AddTransition fromOffset="1" toOffset="3">
            <Receiving>
              <RSP_nack>
                <Sender>
                  <Value value="1"/>
                </Sender>
                <ErrorCode>
                  <!-- INVALID_STATE_ID -->
                  <Value value="8205"/>
                </ErrorCode>
              </RSP_nack>
            </Receiving>
          </AddTransition>
          <!-- It is possible while testing wrong stateId the state change to CONFIGURED-->
          <AddTransition fromOffset="1" toOffset="2">
            <Receiving>
              <NTF_state_changed>
                <Sender>
                  <Value value="1"/>
                </Sender>
                <StateId>
                  <Value value="5"/>
                </StateId>
              </NTF_state_changed>
            </Receiving>
          </AddTransition>
          <AddTransition fromOffset="2" toVariable="breakpoint(step, 5)">
            <Receiving>
              <RSP_nack>
                <Sender>
                  <Value value="1"/>
                </Sender>
                <ErrorCode>
                  <!-- INVALID_STATE_ID -->
                  <Value value="8205"/>
                </ErrorCode>
              </RSP_nack>
            </Receiving>
          </AddTransition>
          <ForEach variableName="i">
            <Set>
              <IntegerRange min="0" max="2"/>
            </Set>
            <ForEach variableName="output">
              <Set>
                <Slave.Outputs/>
              </Set>
              <AddTransition fromOffsetVariable="i" toOffsetVariable="i">
                <Receiving>
                  <DAT_input_output>
                    <DataId>
                      <Variable variablenname="dataId(output.valueReference)"/>
                    </DataId>
                    <ReceivingPayloadField pos="0">
                      <Condition condition="minMaxDefined(output.valueReference)">
                        <ConditionFullfilled>
                          <BetweenMinMax valueReferenceVariable="output.valueReference"/>
                        </ConditionFullfilled>
                        <Else>
                          <Any valueReferenceVariable="output.valueReference"/>
                        </Else>
                      </Condition>
                    </ReceivingPayloadField>
                  </DAT_input_output>
                </Receiving>
              </AddTransition>
            </ForEach>
          </ForEach>
          <UpdateMaxStep increase="3"/>
        </If>
      </If>
    </ForEach>
    <ForEach variableName="output">
      <Set>
        <Slave.Outputs/>
      </Set>
      <AddTransition fromOffset="0" toOffset="0">
        <Receiving>
          <DAT_input_output>
            <DataId>
              <Variable variablenname="dataId(output.valueReference)"/>
            </DataId>
            <ReceivingPayloadField pos="0">
              <Condition condition="minMaxDefined(output.valueReference)">
                <ConditionFullfilled>
                  <BetweenMinMax valueReferenceVariable="output.valueReference"/>
                </ConditionFullfilled>
                <Else>
                  <Any valueReferenceVariable="output.valueReference"/>
                </Else>
              </Condition>
            </ReceivingPayloadField>
          </DAT_input_output>
        </Receiving>
      </AddTransition>
    </ForEach>
  </ExtensionSet>

  <!-- RUNNUNG -->


  <!-- STOPPING -->
  <!-- Nothing to do for STOPING -->

  <!-- STOPPED -->
  <ExtensionSet state="16">
     <!-- Check if slave checks PDU_NOT_ALLOWED -->
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_clear>
          <Receiver>
            <Value value="1"/>
          </Receiver>
        </CFG_clear>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_time_res>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <Numerator>
            <Invalid/>
          </Numerator>
          <Denominator>
            <Invalid/>
          </Denominator>
        </CFG_time_res>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_steps>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <DataId>
            <Invalid/>
          </DataId>
          <Steps>
            <Invalid/>
          </Steps>
        </CFG_steps>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_input>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <DataId>
            <Invalid/>
          </DataId>
          <Pos>
            <Invalid/>
          </Pos>
          <TargetVr>
            <Invalid/>
          </TargetVr>
          <SourceDataType>
            <Invalid/>
          </SourceDataType>
        </CFG_input>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_output>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <DataId>
            <Invalid/>
          </DataId>
          <Pos>
            <Invalid/>
          </Pos>
          <SourceVr>
            <Invalid/>
          </SourceVr>
        </CFG_output>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_source_network_information_TCP_IPv4>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <DataId>
            <Invalid/>
          </DataId>
          <TransportProtocol>
            <Invalid/>
          </TransportProtocol>
          <IpAdress>
            <Invalid/>
          </IpAdress>
          <Port>
            <Invalid/>
          </Port>
        </CFG_source_network_information_TCP_IPv4>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_target_network_information_TCP_IPv4>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <DataId>
            <Invalid/>
          </DataId>
          <TransportProtocol>
            <Invalid/>
          </TransportProtocol>
          <IpAdress>
            <Invalid/>
          </IpAdress>
          <Port>
            <Invalid/>
          </Port>
        </CFG_target_network_information_TCP_IPv4>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_param_network_information_TCP_IPv4>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <ParamId>
            <Invalid/>
          </ParamId>
          <TransportProtocol>
            <Invalid/>
          </TransportProtocol>
          <IpAdress>
            <Invalid/>
          </IpAdress>
          <Port>
            <Invalid/>
          </Port>
        </CFG_param_network_information_TCP_IPv4>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_parameter>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <TargetVr>
            <Invalid/>
          </TargetVr>
          <SourceDataType>
            <Invalid/>
          </SourceDataType>
          <payload>
            <Invalid/>
          </payload>
        </CFG_parameter>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_tunable_parameter>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <ParamId>
            <Invalid/>
          </ParamId>
          <Pos>
            <Invalid/>
          </Pos>
          <TargetVr>
            <Invalid/>
          </TargetVr>
          <SourceDataType>
            <Invalid/>
          </SourceDataType>
        </CFG_tunable_parameter>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_logging>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <LogCategory>
            <Invalid/>
          </LogCategory>
          <LogLevel>
            <Invalid/>
          </LogLevel>
          <LogMode>
            <Invalid/>
          </LogMode>
        </CFG_logging>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <CFG_scope>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <DataId>
            <Invalid/>
          </DataId>
          <Scope>
            <Invalid/>
          </Scope>
        </CFG_scope>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_register>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
          <SlaveUUID>
            <Invalid/>
          </SlaveUUID>
          <OpMode>
            <Invalid/>
          </OpMode>
          <MajorVersion>
            <Invalid/>
          </MajorVersion>
          <MinorVersion>
            <Invalid/>
          </MinorVersion>
        </STC_register>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_prepare>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
        </STC_prepare>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_configure>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
        </STC_configure>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_initialize>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
        </STC_initialize>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_run>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
          <StartTime>
            <Invalid/>
          </StartTime>
        </STC_run>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_send_outputs>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
        </STC_send_outputs>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    <AddTransition fromOffset="0" toOffset="1">
      <Sending>
        <STC_stop>
          <Receiver>
            <Value value="1"/>
          </Receiver>
          <StateId>
            <Invalid/>
          </StateId>
        </STC_stop>
      </Sending>
    </AddTransition>
    <AddTransition fromOffset="1" toOffset="2">
      <Receiving>
        <RSP_nack>
          <Sender>
            <Value value="1"/>
          </Sender>
          <ErrorCode>
            <!-- PROTOCOL_ERROR_PDU_NOT_ALLOWED_IN_THIS_STATE -->
            <Value value="4099"/>
          </ErrorCode>
        </RSP_nack>
      </Receiving>
    </AddTransition>
    <UpdateMaxStep increase="2"/>
    
    <!-- Wrong state in transition-->
    <ForEach variableName="oState">
      <Set>
        <DcpStates/>
      </Set>
      <If condition="state != oState">
        <AddTransition fromOffset="0" toOffset="1">
          <Sending>
            <STC_reset>
              <Receiver>
                <Value value="1"/>
              </Receiver>
              <StateId>
                <Variable variablenname="oState"/>
              </StateId>
            </STC_reset>
          </Sending>
        </AddTransition>
        <AddTransition fromOffset="1" toOffset="2">
          <Receiving>
            <RSP_nack>
              <Sender>
                <Value value="1"/>
              </Sender>
              <ErrorCode>
                <!-- INVALID_STATE_ID -->
                <Value value="8205"/>
              </ErrorCode>
            </RSP_nack>
          </Receiving>
        </AddTransition>
        <AddTransition fromOffset="2" toOffset="3">
          <Sending>
            <STC_unregister>
              <Receiver>
                <Value value="1"/>
              </Receiver>
              <StateId>
                <Variable variablenname="oState"/>
              </StateId>
            </STC_unregister>
          </Sending>
        </AddTransition>
        <AddTransition fromOffset="3" toOffset="4">
          <Receiving>
            <RSP_nack>
              <Sender>
                <Value value="1"/>
              </Sender>
              <ErrorCode>
                <!-- INVALID_STATE_ID -->
                <Value value="8205"/>
              </ErrorCode>
            </RSP_nack>
          </Receiving>
        </AddTransition>
        <UpdateMaxStep increase="4"/>
      </If>
    </ForEach>
  </ExtensionSet>

  <ForEach variableName="step">
    <Set>
      <Test.steps/>
    </Set>
    <If
      condition="determineState(step) == 9 || determineState(step) == 10 || determineState(step) == 11">
      <ForEach variableName="output">
        <Set>
          <Slave.Outputs/>
        </Set>
        <AddTransition fromVariable="step" toVariable="step" log="true">
          <Receiving>
            <DAT_input_output>
              <DataId>
                <Variable variablenname="dataId(output.valueReference)"/>
              </DataId>
              <ReceivingPayloadField pos="0">
                <Condition condition="minMaxDefined(output.valueReference)">
                  <ConditionFullfilled>
                    <BetweenMinMax valueReferenceVariable="output.valueReference"/>
                  </ConditionFullfilled>
                  <Else>
                    <Any valueReferenceVariable="output.valueReference"/>
                  </Else>
                </Condition>
              </ReceivingPayloadField>
            </DAT_input_output>
          </Receiving>
        </AddTransition>
      </ForEach>
      <ForEach variableName="input">
        <Set>
          <Slave.Inputs/>
        </Set>
        <AddTransition fromVariable="step" toVariable="step">
          <Sending>
            <ClockTime
              numerator="50"
              denominator="1000"/>
            <DAT_input_output>
              <DataId>
                <Variable variablenname="dataId(input.valueReference)"/>
              </DataId>
              <SendingPayloadField pos="0">
                <Default valueReferenceVariable="input.valueReference"/>
              </SendingPayloadField>
            </DAT_input_output>
          </Sending>
        </AddTransition>
      </ForEach>
      <!-- Send Dat_parameter -->
      <ForEach variableName="parameter">
        <Set>
          <Slave.TunableParameters/>
        </Set>
        <AddTransition fromVariable="step" toVariable="step">
          <Sending>
            <ClockTime
             numerator="1000"
              denominator="1000"/>
            <DAT_parameter>
              <ParamId>
                <Variable variablenname="paramId(parameter.valueReference)"/>
              </ParamId>
              <SendingPayloadField pos="0">
                <Default valueReferenceVariable="parameter.valueReference"/>
              </SendingPayloadField>
            </DAT_parameter>
          </Sending>
        </AddTransition>
      </ForEach>
    </If>
    <If condition="determineState(step) == 8 || determineState(step) == 14">
      <ForEach variableName="output">
        <Set>
          <Slave.Outputs/>
        </Set>
        <AddTransition fromVariable="step" toVariable="step">
          <Receiving>
            <DAT_input_output>
              <DataId>
                <Variable variablenname="dataId(output.valueReference)"/>
              </DataId>
              <ReceivingPayloadField pos="0">
                <Condition condition="minMaxDefined(output.valueReference)">
                  <ConditionFullfilled>
                    <BetweenMinMax valueReferenceVariable="output.valueReference"/>
                  </ConditionFullfilled>
                  <Else>
                    <Any valueReferenceVariable="output.valueReference"/>
                  </Else>
                </Condition>
              </ReceivingPayloadField>
            </DAT_input_output>
          </Receiving>
        </AddTransition>
      </ForEach>
    </If>
  </ForEach>


  <If condition="slave.heartbeat != undefined">
    <ForEach variableName="step">
      <Set>
        <Test.steps/>
      </Set>
      <AddTransition fromVariable="step" toOffset="1">
        <Sending>
          <ClockTime numeratorVariable="slave.heartbeat.maximumPeriodicInterval.numerator"
            denominatorVariable="slave.heartbeat.maximumPeriodicInterval.denominator"/>
          <INF_state>
            <Receiver>
              <Value value="1"/>
            </Receiver>
          </INF_state>
        </Sending>
      </AddTransition>
      <AddTransition fromOffset="1" toVariable="step">
        <Receiving>
          <RSP_state_ack>
            <Sender>
              <Value value="1"/>
            </Sender>
            <StateId>
              <Variable variablenname="determineState(step)"/>
            </StateId>
          </RSP_state_ack>
        </Receiving>
      </AddTransition>
      <ForEach variableName="transition">
        <Set>
          <Test.successor stepVariable="step"/>
        </Set>
        <If condition="transition.receiving != undefined">
          <AddTransition fromOffset="1" toOffset="2">
            <Receiving>
              <Copy pduVariable="transition"/>
            </Receiving>
          </AddTransition>
          <AddTransition fromOffset="2" toVariable="transition.to">
            <Receiving>
              <RSP_state_ack>
                <Sender>
                  <Value value="1"/>
                </Sender>
                <StateId>
                  <Variable variablenname="determineState(step)"/>
                </StateId>
              </RSP_state_ack>
            </Receiving>
          </AddTransition>
        </If>
      </ForEach>
      <UpdateMaxStep increase="2"/>
    </ForEach>
  </If>


  <!-- ToDo self transition for every log -->
  <!-- ToDo Going into SafeState -->
</DcpTestSuiteExtension>
